<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Ejercicio 4 - Bloquear Casilla</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    
    .caja {
      width: 100px;
      height: 100px;
      border: 2px solid #333;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      transition: all 0.3s;
    }
    
    .caja:hover {
      background-color: #f0f0f0;
      transform: scale(1.05);
    }
    
    /* Clase para casillas bloqueadas */
    .bloqueada {
      cursor: not-allowed;
      opacity: 0.6;
    }
    
    .bloqueada:hover {
      background-color: transparent;
      transform: none; /* No se agranda */
    }
    
    .info {
      margin-top: 20px;
      padding: 10px;
      background-color: #e3f2fd;
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <h1>Ejercicio 4 - Validaci√≥n</h1>
  <div class="info">Turno: <strong id="turnoActual">X</strong></div>
  
  <div id="caja" class="caja"></div>
  
  <p style="margin-top: 20px; color: #666;">
    üí° Intenta hacer clic varias veces en la caja. 
    Solo funcionar√° la primera vez.
  </p>

  <script>
    // ========== SOLUCI√ìN EJERCICIO 4 ==========
    
    // Variables de estado
    let turno = "X";
    const caja = document.querySelector('#caja');
    const turnoActual = document.querySelector('#turnoActual');
    
    caja.addEventListener('click', () => {
      // ========== GUARD CLAUSE ==========
      // Verificamos si la casilla YA est√° ocupada
      // Si tiene contenido (X o O), salimos inmediatamente de la funci√≥n
      if (caja.textContent !== "") {
        console.log("‚ùå Casilla ocupada, no se puede cambiar");
        return; // Sale de la funci√≥n aqu√≠ mismo
      }
      
      // ========== C√ìDIGO PRINCIPAL ==========
      // Solo se ejecuta si la casilla est√° vac√≠a
      console.log("‚úÖ Casilla vac√≠a, se puede jugar");
      
      // Escribir el turno actual
      caja.textContent = turno;
      
      // A√±adir clase visual para mostrar que est√° bloqueada
      caja.classList.add('bloqueada');
      
      // Cambiar turno para el pr√≥ximo jugador
      turno = turno === "X" ? "O" : "X";
      turnoActual.textContent = turno;
    });
    
    // ========== CONCEPTOS CLAVE ==========
    
    // ‚úÖ GUARD CLAUSE (Cl√°usula de guarda)
    // Es un patr√≥n que verifica condiciones al inicio
    // Si la condici√≥n no se cumple, sale temprano con 'return'
    // Ventajas:
    //   ‚Ä¢ C√≥digo m√°s legible
    //   ‚Ä¢ Evita anidamiento profundo de if/else
    //   ‚Ä¢ Hace obvias las condiciones para continuar
    
    // ‚úÖ classList.add('clase')
    // A√±ade una clase CSS al elemento
    // M√©todos relacionados:
    //   ‚Ä¢ classList.add('clase') - A√±ade clase
    //   ‚Ä¢ classList.remove('clase') - Quita clase
    //   ‚Ä¢ classList.toggle('clase') - Alterna (a√±ade/quita)
    //   ‚Ä¢ classList.contains('clase') - Verifica si tiene la clase
    
    // ========== COMPARACI√ìN DE ESTILOS ==========
    
    // ‚ùå ESTILO ANTIGUO - Con if/else anidado:
    // caja.addEventListener('click', () => {
    //   if (caja.textContent === "") {
    //     caja.textContent = turno;
    //     caja.classList.add('bloqueada');
    //     turno = turno === "X" ? "O" : "X";
    //     turnoActual.textContent = turno;
    //   } else {
    //     // No hacer nada
    //   }
    // });
    
    // ‚úÖ ESTILO MODERNO - Con guard clause:
    // caja.addEventListener('click', () => {
    //   if (caja.textContent !== "") return; // Sale si est√° ocupada
    //   
    //   // Todo el c√≥digo de "caso feliz" sin anidamiento
    //   caja.textContent = turno;
    //   caja.classList.add('bloqueada');
    //   turno = turno === "X" ? "O" : "X";
    //   turnoActual.textContent = turno;
    // });
    
    // ========== FLUJO DE EJECUCI√ìN ==========
    // Primer click:
    //   1. Verifica: caja.textContent !== "" ‚Üí false (est√° vac√≠a)
    //   2. NO ejecuta return
    //   3. Escribe "X"
    //   4. A√±ade clase 'bloqueada'
    //   5. Cambia turno a "O"
    
    // Segundo click:
    //   1. Verifica: caja.textContent !== "" ‚Üí true (tiene "X")
    //   2. Ejecuta return (sale de la funci√≥n)
    //   3. No ejecuta nada m√°s
    
    // Tercer click, cuarto, quinto...:
    //   Siempre sale en el return, nunca cambia
    
    // ========== POR QU√â FUNCIONA ==========
    // La clave est√° en que textContent PERSISTE entre clicks
    // Una vez que escribimos "X", ese valor se queda ah√≠
    // Cada nuevo click encuentra ese "X" y sale inmediatamente
  </script>

</body>
</html>